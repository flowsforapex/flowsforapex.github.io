---
permalink: /:collection/first-workflow/
title: "Build your First Workflow"
toc: true
typora-root-url: ../
---
# Build your first Workflow Application with Flows for APEX



Flows for APEX is a BPMN-based business process modeling tool and workflow engine built with, and for, the Oracle APEX low code development platform.

This section of the site contains a basic tutorial showing you how to connect Flows for APEX into your APEX application

Flows for APEX enables every APEX developer to create and run process flows for their APEX apps. Have a look yourself what Flows for APEX can do for you!

![Example Process running](/assets/images/runningMyBigShippingExample.png)

We're going to build something a little simpler than this model in this tutorial.

## Pre-Requirements

Before starting this tutorial, you should have successfully downloaded the latest version of the Flows for APEX packaged app [here](https://github.com/flowsforapex/apex-flowsforapex/releases/latest) and imported it into your APEX workspace.

You can find more information about the installation process [here](/{{ page.collection }}/installation)

## First steps with the engine app

### Create your first model

- **Log in** to the Flows for APEX application, **open the menu** by clicking the *hamburger* menu at the top left, and go to "**Flow Management**".   The Flow Management page shows you all of the process definitions or process diagrams that are on the system.  When you first install Flows for APEX, this should contain over 25 BPMN tutorial diagrams that you can work through later.

- Click on the **Create Model** button the top right.
- Complete the form with the following information
  - **Category**: "My Training Models"
  - **Name**:       "Getting Started"
  - **Version**:    "0"

![Create First Model](/assets/images/getting-started-251-1.png "First Model")

- Click the **Create** button.

![Flow Detail Page](/assets/images/getting-started-251-2.png)

#### Edit your first BPMN diagram

- Click on the **Modify Diagram** button in the Flow Viewer region header to open the **Flow Modeler**.  
- The **Flow Modeler** screen will open.  This is a graphical BPMN process modeling tool.  Note the **toolbar** on the left hand side, and the **properties panel** on the right side.
  On the toolbar, click on the Start Event icon ( <span class="bpmn-icon bpmn-icon-start-event-none"></span> ), the thin single circle , **drag** it into the blank canvas area then **double click** on the event and type "Start" in the text area to name our new Start event.

![Add Start Event](/assets/images/getting-started-2.gif "Add Start Event"){: .align-center}

- **Select** the start event and you will see a **tool menu** open next to it.  Click on the task symbol ( <span class="bpmn-icon bpmn-icon-task-none"></span> ), labeled **Append Task**.  Select your new task  and name it "First Task".
  ![Add Task](/assets/images/getting-started-3.gif "Add Task"){: .align-center}
- Select the Task, click on the End Task symbol ( <span class="bpmn-icon bpmn-icon-end-event-none"></span>), labeled **Append EndEvent**, then double click on the End Event and name it "End"
  ![Add End Event](/assets/images/getting-started-4.gif "Add End Event"){: .align-center}
- Click on Apply Changes to save the diagram.

### Create your first process instance

The *Flow Modeler* defines how a business process should run - it creates the rules of a business process in a **BPMN model** which we refer to as a **model** or a **diagram** .  The business process will execute many times - and each run of the process is called a **process instance**.  The **Flow Monitor** shows information about all of the process instances that are on the system.

- Open the menu and go to **Flow Monitor**.  The Flow Monitor shows all of the running process instances. 
- Click on **+ Create instance**
- Fill the form as it
  - **Model**: "Getting Started"
  - **Name**: "First Instance"

![Fill the instance form](/assets/images/getting-started-251-5.png "Fill the instance form"){: .align-center}

- Click **Create**

### Start your first process instance

- On the Flow Instances report, click on the row menu action of your instance and select start

![Start Your First Instance](/assets/images/getting-started-251-6.png "Start Your First Instance"){: .align-center}

- You can now see that the process instance is started, and its status is now **running**.  The **Flow Viewer** region shows the current task in green, and completed tasks in grey.

![Your First Instance is Started](/assets/images/getting-started-251-7.png "Your First Instance is Started"){: .align-center}

- Go to the **Instance Details Page** by using the row menu action or by clicking on the quick action **Details** .

### Step the Workflow Forwards -  Complete your first task

- On the **Subflows** report, you can see the current running subflows. You can **complete** the step by using either the row action menu or the quick action link.

![Complete The Task](/assets/images/getting-started-8.png "Complete The Task"){: .align-center}

- After completing the step, the process instance is now completed.

![Process Instance Completed](/assets/images/getting-started-9.png "Process Instance Completed"){: .align-center}

OK - so that was a very simple (trivial!) process that we created in the Flow Modeler and then test-ran in the Flow Monitor.

## Integration into an APEX application

### Create a new APEX application

Create a new APEX application and call it Getting Started

### Import the plug-ins and application items.

A Flows for APEX app requires a set of plugins and application items.  These are now all contained in an APEX Component Group, and can be imported in one simple step.

- Go to **Shared Components** --> **Component Groups** and click on **Copy from another app** (Under Tasks in the Right hand pane).

  ![Copy Flows for APEX Component Group](/assets/images/copy-component-group.png)

- Select the **Flows for APEX** application, find the **Flows for APEX Components** component group,  and click on **Next**.

- ![Copy the Component Group](/assets/images/copy-component-group-2.png)

- Click **Copy Component Group**

- You how have all the components required. for your application.

### Use the Manage Flow Instance plug-in

- On page 1, create a new region:
  - Identification:
    - Title: My Tasks
    - Type: Static Content (default)
  - Layout:
    - Slot: Content Body
- Add a new button on the same page:
  - Identification
    - Button Name: CREATE_INSTANCE
    - Label: Create Instance
  - Layout:
    - Region: My Tasks
    - Slot: Edit

![Getting Started Integration Step 1](/assets/images/getting-started-10.png "Getting Started Integration Step 1"){: .align-center}

- Add a new process on the same page:
  - Identification:
    - Name: Create and Start Instance
    - Type: Flows for APEX - Manage Flow Instance [Plug-in]
  - Settings:
    - Action: Create and Start (default)
    - Flow Instance Name: Getting Started - &APP_USER.
    - Select Flow Using: Static Text (default)
    - Flow (Diagram) selection based on: Name (default)
    - Set Business Reference: none (default)
    - Return Instance ID into: none (default)
    - Set Process Variables?: No Process Variables (default)
  - Server-side Condition:
    - When Button Pressed: CREATE_INSTANCE

![Getting Started Integration Step 2](/assets/images/getting-started-11.png "Getting Started Integration Step 2"){: .align-center}

Now, run your application and click on the Create Instance button. Nothing happens? Are you sure?
Go on the engine app and open the Flow Monitor page. As you see, we just create a new instance and if you click on the Name you will see that it is also running.

![Getting Started Integration Step 3](/assets/images/getting-started-12.png "Getting Started Integration Step 3"){: .align-center}

That's cool but you didn't see anything on your custom application so lets see if we can fix that.

### Display the tasks

*Flows for APEX* comes with several views to help you to integrate it into your application, one of them is the flow_task_inbox_vw view.

- Update the region "My Tasks":
  - Identification:
    - Type: Classic Report
  - Source
    - Location: Local Database
    - Type: SQL Query
    - SQL Query
      ```sql
      select sbfl_id,
            sbfl_prcs_id,
            sbfl_process_name,
            sbfl_prcs_init_ts,
            sbfl_current_name,
            sbfl_status,
            sbfl_step_key
      from flow_task_inbox_vw
      where sbfl_dgrm_name = 'Getting Started'
      ```

Save and run the page and you should now see the list of tasks that need to be completed!

![Getting Started Integration Step 4](/assets/images/getting-started-13.png "Getting Started Integration Step 4"){: .align-center}

### Display the workflow viewer

One major advantage of *Flows for APEX* is the ability to see the workflow state graphically and we provide a plug-in and a view to make it easier.

- Create a new plug-in page.  In the Application Builder, click **Create Page** and select **Plug-in Page**.
  ![Create Plugin Page](/assets/images/create-flow-viewer.png)
  
- Select **Flows for APEX - Viewer** and click on **Next**.
  ![Getting Started Integration Step 6](/assets/images/getting-started-15.png "Getting Started Integration Step 6"){: .align-center}
  
- Set the Page Name to **Workflow Viewer**, make sure the selected Page Mode is **Drawer**.
  Set the Data Source to be the **FLOW_VIEWER_VW** and click on **Next**.
  
  ![Xreate Plug In Page](/assets/images/getting-started-create-plugin-page.png)
  
  
  
- Change the attributes **Add Highlighting** to **Yes** and select the **Highlighting Data**.  Enable **Use BPMN Colors** to show any coloring that has been added to the diagram.  Select the **Call Activity Data** (see screenshot) and click on **Create Page**.
  
  ![Configure the Viewer Plug In](/assets/images/configure-viewer-plugin.png ){: .align-center}
  
- Add an APEX **page item** on the Viewer region:
  - Identification:
    - Name: P3_PRCS_ID
    - Type: Hidden

![Getting Started Integration Step 10](/assets/images/getting-started-19.png "Getting Started Integration Step 10"){: .align-center}

- Select the region Workflow Viewer and under Source/Where Clause add: `prcs_id = :P3_PRCS_ID`

![Configure P3_PRCS_ID](/assets/images/getting-started-config-prcs-id.png "Getting Started Integration Step 11"){: .align-center}

- Edit the page 1, on the "My Tasks" Region make the following changes:
  - Column SBFL_ID
    - Identification:
      - Type: Hidden Column
  - Column SBFL_PRCS_ID
    - Identification:
      - Type: Link
    - Heading:
      - Heading: "-"
    - Link:
      - Target:
        ![Configure link to Viewer](/assets/images/getting-started-config-link-to-viewer.png)
      - Link Text: `<span class="fa fa-search" aria-hidden="true"></span>`
  - Column SBFL_PROCESS_NAME
    - Heading:
      - Heading: Instance Name
  - Column SBFL_PRCS_INIT_TS
    - Heading:
      - Heading: Init Date
  - Column SBFL_CURRENT_NAME
    - Heading:
      - Heading: Current Task
  - Column SBFL_STATUS
    - Heading:
      - Heading: Status

Save and Run the page, you should now be able to click on the link and see your instance state in the Viewer!

![Task List with Workflow Viewer Drawer](/assets/images/getting-started-list-list-with-viewer.png "Getting Started Integration Step 13"){: .align-center}

Now it's time to complete that task from your custom application.

### Use the Manage Flow Instance Step plug-in

- Create a new blank drawer page called "Task" without entry in the menu. Page ID should be 4.
- On the new page, create a new region "Task" in the Content Body and add three items:
  - P4_PRCS_ID type Hidden
  - P4_SBFL_ID type Hidden
  - P4_STEP_KEY type Hidden
- Add a new button COMPLETE
- Add a first process
  - Settings
    - Name: Complete Task
    - Type: Flows for APEX - Manage Flows Instance Step [Plug-in]
    - Action: Complete Step
    - Flow Instance info: In Page Items (default)
    - Process ID item: P3_PRCS_ID
    - Subflow ID item: P3_SBFL_ID
    - Step Key item: P3_STEP_KEY
    - Set Gateway Routing?: false (default)
    - Auto-Branching?: false (default)
    - Return Flow Instance and Subflow ID?: none (default)
  - Server Side Condition:
    - When Button Pressed: COMPLETE
- Add a second process
  - Settings
    - Name: Close Dialog
    - Type: Close Dialog
  - Server Side Condition:
    - When Button Pressed: COMPLETE
- Edit page 1 and, on region "My Tasks", update column SBFL_ID:
  - Identification:
    - Type: Link
  - Link
    - Target:
      ![Getting Started Integration Step 13](/assets/images/getting-started-23.png "Getting Started Integration Step 13"){: .align-center}
    - Link Text:  `<span class="fa fa-edit" aria-hidden="true"></span>`
- Add a new Dynamic Action:
  - Identification:
    - Name: Edit Step Close
  - When
    - Event: Dialog Closed
    - Selection Type: Region
    - Region: My Tasks
  - Execution:
    - Event Scope: Dynamic
- Action when True:
  - Identification:
    - Action: Refresh
  - Affected Elements:
    - Selection Type: Region
    - Region: My Tasks

Save and Run page 1, you should now see a new link, click on it, a new modal page should open and have a complete button. Click on that button and your task will be completed. You can check on the engine app that your instance is correctly completed.

![Getting Started Integration Step 14](/assets/images/getting-started-24.png "Getting Started Integration Step 14"){: .align-center}

### Going further

Congratulations, you have just complete our getting started tutorial and learn the basics of the following concepts:

- Create a new model
- Edit a BPMN diagram in the online editor
- Create and start a process instance
- Complete a step in the instance detail page
- Integrate *Flows for APEX* in a custom application with the plug-ins

To go further, we recommend you to follow our [BPMN tutorials](/{{ page.collection }}/bpmn-tutorials/) or download our step by step [APEX integration tutorial](/assets/files/Tutorial_Flows_for_APEX_v23.1.zip).
